title: NYC Draft
link: <https://crate.io/a/nyc-draft>
author: Chris Ward
description: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quonam, inquit, modo? Sed tamen intellego quid velit.
created: 2016/07/26 11:17:43
post_name: nyc-draft
status: publish
post_type: post
tags: demos, crate
category: news, developernews

> "New York, New York!"

The city so iconic, popular and well known, they named it twice. Hundreds of films have depicted New York City (NYC), generally being destroyed by a form of monster or invader. It has landmarks that are World famous, and [nearly 60 million visitors a year](http://www.nytimes.com/2016/03/09/nyregion/record-number-of-tourists-visited-new-york-city-in-2015-and-more-are-expected-this-year.html?_r=0).

But as the most populous city in the USA (Over 20 million in the Metropolitan area) that spans 470 square miles and 230 miles of dark, mysterious subway. It can be a daunting city for visitors, full of hidden delights and dangers.

Fortunately [NYC is a big supporter of open data](https://nycopendata.socrata.com/), so we decided to put Crate to the test and analyze these data sets to spot trends, patterns and help a keen visitor learn of the secrets that lurk in the Big Apple.

## When There's Something Slightly Wrong in Your Neighborhood... Who Ya Gonna Call?

### NYC311!

The 311 phone number in NYC is the city's main source of information and non-emergency services. Launched in 2003, it fields an average of 50,000 calls a day and even back in 2010 Wired [wrote about the service](http://www.wired.com/2010/11/ff_311_new_york/) celebrating its 100,000,000th call. In short, it's a great data set to analyze to get a feeling of how locals perceive their city.

**DETAILS ON DATA SET?**

## Where (Not) to Eat

There are over 24,000 restaurants in NYC, and whilst there are dozens of guides, apps and blogs telling you the best places to eat, what about where to avoid completely?

This query filters the data set for complaints about establishments that serve food, and finds the ten with the highest amount of complaints.

```sql
select incident_address, count(*) from nyc
  where incident_address is not null and match(complaint_type, 'Food Establishment')
  group by 1 order by 2 desc limit 10;
```

## The Hidden Menace

New York has been infamous for high crime, high rents and high temperatures in Summer. But what's the real issue at the top of many New Yorkers lists?

*Squeegees*.

The infamous [Squeegee Women and Men](https://en.wikipedia.org/wiki/Squeegee_man) found jumping in front of cars stopped at traffic lights across many cities 'offering' to clean your windscreens, have been increasingly irritating New Yorkers since they appeared in the 1980s.

```sql
select count(*) from nyc where match(complaint_type, 'Squeegee');
```

## We'll Freeze Them Out! / Where not to AirBnB

Looking for an AirBnB in Winter and want to know where to avoid? New Yorkers will know...

Real Estate is in high demand in New York, and spurious Landlords are always looking for ways to 'encourage' long-term tenants to move out so they can re-rent at more contemporary prices.

Whilst querying residential locations that had had complaints lodged against them, we noticed one curious location:

```sql
select incident_address as "address", count(*)
  as incidents from nyc
  where match(location_type, 'RESIDENTIAL BUILDING')
  group by 1 order by 2 desc limit 1;
```

We were curious, what sorts of issues were residents at this address experiencing?

```sql
select complaint_type as "incident", count(*)
  as "count" from nyc
  where match(incident_address, '34 ARDEN STREET')
  group by 1 order by 2 desc;
```

Then curiously, at a particular date, the complaints stopped:

```sql
select extract(year from created_date) as "year", count(*)
  as "incidents" from nyc
  where match(incident_address, '34 ARDEN STREET') and match(complaint_type, 'HEATING')
  group by 1 order by 2 desc;
```

Was their heating suddenly fixed by a Landlord plagues with guilt? Sadly no, this was the date that the whole property went up for sale, and still is, if you're interested.

--------------------------------------------------------------------------------

## Notes

311 calls, show schema (console - maybe, def screenshots) more detail on open data set select on complaint type which is how you categorise the call NOT setup, just problem, in detail coming later, dashboards coming later, docker coming later (how to group post?) Other queries in list and show results, temperature, heat, summer camps, 34 Arden st, leads to being for sale! Spice Hut, then introduce new data set on health ratings
